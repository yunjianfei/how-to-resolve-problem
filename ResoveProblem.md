**关于架构的思考(二)——如何解决问题**
=====


# 1. 背景

在《关于架构的思考(一)》中，提到了以下观点：

- 问题的定义：目标和现状有差异
- 问题的分类：异常型问题和改善型问题
- 问题的视角：生活中绝大多数东西都是为了解决特定问题（需求）而存在，可以按照解决的问题来定义
- 问题的重要性：人类社会和个人的发展都是伴随着无数问题的解决，解决问题的层次越高，发展越好
- 问题视角的架构定义：架构是为了解决将现实需求转换为软件实现的问题
- 解决问题的关键：开放式转向封闭式的过程

----
在现实生活中我们会遇到无数问题，仔细想想我们是不是犯过以下错误：
- 遇到问题，还没有深入分析，就凭着第一印象拍拍脑袋就去解决。

   例子：
   
   分析：遇到问题，一定要弄清楚问题背后深层次的原因，否则只是表面看起来“解决了”
   
- 遇到问题需要他人协助解决，自己草率的想了一个解决方案，就去要求他人实现。

   例子：李XX，你帮我实现一个返回用户数据的接口。
   
   分析：要求别人协助解决一个问题的时候，一定要聚焦到问题本身，而不是自己想了一个解决方案去要求别人实现。
   
- 有人来要求做一件事，没有深入思考这件事的根本目的，就去做了。

   例子：领导说，小李，帮我
   
   分析：别人要求做什么事情的时候，一定要弄清楚为什么要做这件事，做这件事的目的是什么。


上面几种情况，我们多多少少都遇到过。如何解决问题，是非常大的话题和学问，本文尽量努力表述清楚自己粗浅的一些见解，能引起一些思考就好。

我们都知道，一个人解决问题能力的强弱，和掌握知识的深度、广度，以及快速学习能力息息相关。那么，开始之前，先讲一下我们认知事物的过程。

# 2. 学习的黄金圆环

我们在探索新的事物时，一般有以下三个阶段：
1. 这是什么东西
2. 这东西是干什么的，怎么用
3. 这东西到底是怎么运作的，为什么是这样

总结起来就是如下的一个学习圆环：

<img src="http://img.blog.csdn.net/20170923173632436" width="30%" height="30%">

学习的黄金圆环，是一个由表及里，不断迭代，不断深入，由表及里的过程。
- waht：是什么，干什么的
- how：怎么用，怎么运用
- why：为什么是这样，本质是什么

在探究本质的时候，会发现新的问题和未知的事物，进而形成一个由问题驱动的学习圆环。

想要提升解决问题的能力，就必须保持好奇心，不停的问为什么，由问题驱动学习，这样解决问题的能力也随之提高。

# 3. 如何解决异常型问题

解决异常型问题的关键在于找到问题的本质，我们也可以称之为“根因”。

中医讲究"望闻问切"来定位疾病的根源。这里我们也需要一些手段来找到根因，非常流行和通用的一种方法是“5W1H分析法”（也有叫牛眼分析法的），这里不详细阐述，感兴趣的可以自行搜索学习。下面阐述本文的一些见解。

找到根因，最主要是要弄明白以下几个事情：
- who：到底是谁的问题
- what：到底是什么问题
- why：为什么会发生问题

这里提出两个关键字：“挖”和“切”，“挖”是不停的问“为什么的过程”，“切”是按照问题主体的合理切分。

## 3.1 who-谁的问题
遇到异常型问题时，首先必须明确“谁的问题”，也就是问题的主体，否则后面的工作都属于无用功。

前面提到了两个关键词“挖”和“切”，运用这两者获取“谁的问题”过程中，对涉及到的所有相关者，会形成一个“链式结构”或者“树型结构”，如下分别讲解。

### 3.1.1 问题主体：链式结构

以一个我们经常遇到的问题举例：一个web网页无法访问了。我们需要“挖”这个问题涉及到的“相关者”有哪些。也就是要把web网页的调用链弄明白，假设如下：
- 用户的访问终端：手机app/手机浏览器/PC浏览器等等
- 用户的网络类型：wifi，电信/移动等等
- 用户地域&cdn网络：北京用户，第三方cdn运营商/自建cdn等等
- 流量入口服务：lvs&nginx/haproxy&nginx等等
- 服务端：web网页url访问的后端服务

这样形成以下的问题主体链：
>用户访问终端 -> 用户网络&运营商 -> cdn -> 流量入口 -> 服务端

*注意：要解决这个问题，必须先把整个调用链弄清楚，这个过程如果不熟悉，其实就是一个学习的过程，可以参照“学习圆环”。

针对以上调用链，我们继续“挖”是谁的问题，
- 用户的访问终端：终端是否可以正常访问其他页面，如果是，一般不会是终端问题
- 用户的网络类型：用户网络访问其他服务是否正常
- 用户地域&cdn网络：该地域用户是否大规模有问题，该cdn厂商服务是否稳定
- 流量入口服务：流量入口程序是否稳定，是否有异常/错误发生
- 服务端：针对该web界面访问的url，是否做了正确处理和返回，是否超时

按照这个范围去查，基本可以很快定位出到底是“谁的问题”。

### 3.1.2 问题主体：树型结构
3.1.1中的问题是一个简单的问题链条。但是如果问题稍微复杂点，形成的就会是一个树形结构。还以3.1.1的例子为准，假设web界面调用的url在后端是多层调用，则变成了如下结构：
>用户访问终端 -> 用户网络&运营商 -> cdn -> 流量入口 -> 服务端 -> 依赖服务1
>                                                      -> 依赖服务2
>                                                      -> 依赖服务3

这种情况下，就需要依次排查是哪个依赖服务发生了故障。


## 3.2 what-什么问题

在明确了是谁的问题只会，基本也就明确了“什么问题”。在分析的过程中，这两者一定是并存的。



## 3.3 why-为什么会发生问题


# 4. 如何解决改善型问题

解决改善型问题的关键在于明确目标是什么，如何达到目标。
- what： 核心需求、目标是什么
- who： 利益相关者有哪些，以及他们关注的利益点
- how： 利用有限的资源，权衡利益相关者，去满足关键利益点

这里提出两个关键字：“挖”和“切”


## 4.1 what-核心目标是什么

## 4.2 who-明确相关利益者

## 4.3 how-如何满足关键利益点


# 5. 关于人性

在我们日常生活中能遇到的问题中，和人相关的问题，解决起来要特别小心，解决问题的人要做到“洞悉人性”，并且“反人性”。

